<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blogs Con Juli - YouTube Feed</title>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
  <style>
    /* --- Global Page Styles --- */
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      color: #333;
    }
    .welcome-banner {
      background: #eaeaea;
      text-align: center;
      padding: 20px;
    }
    .welcome-text {
      font-family: 'Dancing Script', cursive;
      font-size: 2.5em;
      margin: 0;
    }
    .container {
      max-width: 1200px;
      margin: 20px auto;
      padding: 0 20px;
    }
    .channel-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 30px;
      padding: 10px;
      background: #fff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      border-radius: 8px;
    }
    .channel-avatar {
      border-radius: 50%;
      margin-right: 20px;
    }
    .channel-info {
      flex-grow: 1;
    }
    .channel-name {
      font-size: 1.8em;
      margin: 0;
    }
    .channel-stats {
      color: #555;
    }
    .video-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
    }
    .video-card {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      overflow: hidden;
      transition: transform 0.3s ease;
    }
    .video-card:hover {
      transform: translateY(-5px);
    }
    .thumbnail {
      position: relative;
    }
    .thumbnail img {
      width: 100%;
      display: block;
    }
    .video-duration {
      position: absolute;
      bottom: 8px;
      right: 8px;
      background: rgba(0, 0, 0, 0.8);
      color: #fff;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.8em;
    }
    .video-info {
      padding: 10px;
    }
    .video-title {
      font-size: 1.1em;
      margin-bottom: 5px;
      font-weight: bold;
    }
    .video-channel,
    .video-stats {
      font-size: 0.9em;
      color: #777;
    }

    /* --- Dynamic Color Changing Subscribe Button --- */
    .subscribe-button {
      padding: 12px 24px;
      font-size: 18px;
      color: #fff;
      border: none;
      cursor: pointer;
      border-radius: 4px;
      background: linear-gradient(270deg, #ff8a00, #e52e71, #9b00ff, #ff8a00);
      background-size: 800% 800%;
      animation: colorShift 10s ease infinite;
      transition: transform 0.3s ease;
    }
    .subscribe-button:hover {
      transform: scale(1.05);
    }
    @keyframes colorShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* --- Blue Cake with Vine Red Font Decoration --- */
    .cake {
      position: relative;
      width: 300px;
      height: 200px;
      background: #4a90e2; /* Blue cake color */
      border-radius: 50% 50% 20% 20%;
      box-shadow: inset 0 5px 20px rgba(0,0,0,0.2);
      overflow: hidden;
      margin: 20px auto; /* Center the cake on the page */
    }
    .cake::before {
      content: "";
      position: absolute;
      top: -30px;
      left: 0;
      width: 100%;
      height: 60px;
      background: #4a90e2;
      border-radius: 50%;
    }
    .vine-text {
      font-family: 'Dancing Script', cursive;
      font-size: 2.5em;
      color: #e52e71; /* Vine red font */
      text-align: center;
      position: absolute;
      width: 100%;
      bottom: 20px;
      left: 0;
      text-shadow: 2px 2px 5px rgba(0,0,0,0.3);
    }
    .vine-decoration {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      height: 50px;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 200 50"><path d="M0 25 C50 0, 150 50, 200 25" fill="none" stroke="%23e52e71" stroke-width="4"/></svg>') no-repeat center;
      background-size: cover;
    }
  </style>
</head>
<body>
  <div class="welcome-banner">
    <h1 class="welcome-text">Bienvenidos a mi canal</h1>
  </div>

  <!-- Decorative Blue Cake Element -->
  <div class="cake">
    <div class="vine-text">Delicious Cake</div>
    <div class="vine-decoration"></div>
  </div>
  
  <div class="container">
    <div id="channel-container" class="channel-header">
      <div class="loading">Cargando información del canal...</div>
    </div>
    
    <div id="videos-container" class="video-grid">
      <div class="loading">Cargando videos...</div>
    </div>
  </div>

  <script>
    // --- Configuration ---
    const API_KEY = 'AIzaSyCT8bPyUWOnbUCs36rFucoPnAs3eX9xlUw';
    const CHANNEL_ID = 'UCw_SZuRMPAFSxWFGr3IhAZQ';

    const channelContainer = document.getElementById('channel-container');
    const videosContainer = document.getElementById('videos-container');

    // --- Utility Functions ---
    function formatViewCount(count) {
      if (count >= 1e6) return (count / 1e6).toFixed(1) + 'M';
      if (count >= 1e3) return (count / 1e3).toFixed(1) + 'K';
      return count.toString();
    }

    function formatDuration(duration) {
      const match = duration.match(/PT(\d+H)?(\d+M)?(\d+S)?/);
      const hours = (match[1] || '0H').slice(0, -1);
      const minutes = (match[2] || '0M').slice(0, -1);
      const seconds = (match[3] || '0S').slice(0, -1);
      return `${hours > 0 ? hours + ':' : ''}${minutes.padStart(2, '0')}:${seconds.padStart(2, '0')}`;
    }

    function formatPublishedDate(date) {
      const now = new Date();
      const published = new Date(date);
      const diffDays = Math.floor((now - published) / (1000 * 60 * 60 * 24));
      if (diffDays === 0) return 'Hoy';
      if (diffDays === 1) return 'Ayer';
      if (diffDays < 7) return `Hace ${diffDays} días`;
      if (diffDays < 30) return `Hace ${Math.floor(diffDays / 7)} semanas`;
      if (diffDays < 365) return `Hace ${Math.floor(diffDays / 30)} meses`;
      return `Hace ${Math.floor(diffDays / 365)} años`;
    }

    // --- Fetch Functions ---
    async function fetchChannelInfo() {
      try {
        const response = await fetch(`https://www.googleapis.com/youtube/v3/channels?part=snippet,statistics&id=${CHANNEL_ID}&key=${API_KEY}`);
        const data = await response.json();
        if (!data.items || data.items.length === 0) throw new Error('Canal no encontrado');
        
        const channel = data.items[0];
        const html = `
          <img class="channel-avatar" src="${channel.snippet.thumbnails.default.url}" alt="Avatar del Canal">
          <div class="channel-info">
            <h2 class="channel-name">${channel.snippet.title}</h2>
            <div class="channel-stats">${formatViewCount(channel.statistics.subscriberCount)} suscriptores • ${channel.statistics.videoCount} videos</div>
          </div>
          <button class="subscribe-button" onclick="window.open('https://www.youtube.com/channel/${CHANNEL_ID}?sub_confirmation=1', '_blank')">Suscribirse</button>
        `;
        channelContainer.innerHTML = html;
      } catch (error) {
        console.error('Error fetching channel info:', error);
        channelContainer.innerHTML = `<div class="error">${error.message}</div>`;
      }
    }

    async function fetchChannelVideos() {
      try {
        const response = await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${CHANNEL_ID}&maxResults=12&order=date&type=video&key=${API_KEY}`);
        const data = await response.json();
        if (!data.items || data.items.length === 0) throw new Error('No hay videos disponibles');
        
        const videoIds = data.items.map(item => item.id.videoId).join(',');
        const detailsResponse = await fetch(`https://www.googleapis.com/youtube/v3/videos?part=contentDetails,statistics&id=${videoIds}&key=${API_KEY}`);
        const detailsData = await detailsResponse.json();
        
        const videosHTML = data.items.map((item, idx) => {
          const video = detailsData.items[idx];
          return `
            <div class="video-card">
              <div class="thumbnail">
                <img src="${item.snippet.thumbnails.high.url}" alt="Miniatura">
                <span class="video-duration">${formatDuration(video.contentDetails.duration)}</span>
              </div>
              <div class="video-info">
                <div class="video-title">${item.snippet.title}</div>
                <div class="video-channel">${item.snippet.channelTitle}</div>
                <div class="video-stats">${formatViewCount(video.statistics.viewCount)} vistas • ${formatPublishedDate(item.snippet.publishedAt)}</div>
              </div>
            </div>
          `;
        }).join('');
        videosContainer.innerHTML = videosHTML;
      } catch (error) {
        console.error('Error fetching channel videos:', error);
        videosContainer.innerHTML = `<div class="error">${error.message}</div>`;
      }
    }

    // --- Initialize ---
    fetchChannelInfo();
    fetchChannelVideos();
  </script>
</body>
</html>
