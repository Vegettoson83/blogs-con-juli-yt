<select id="video-filter">
  <option value="all">Todos</option>
  <option value="shorts">Solo Shorts</option>
  <option value="videos">Solo Videos</option>
</select>

<div id="videos-container" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 16px; margin-top: 20px;"></div>

<script>
  const API_KEY = 'YOUR_YOUTUBE_API_KEY';
  const CHANNEL_ID = 'UCw_SZuRMPAFSxWFGr3IhAZQ';
  const UPLOADS_PLAYLIST_ID = `UU${CHANNEL_ID.substring(2)}`;

  const videosContainer = document.getElementById('videos-container');
  const filterSelect = document.getElementById('video-filter');

  function formatDuration(isoDuration) {
    const match = isoDuration.match(/PT(?:(\d+)M)?(?:(\d+)S)?/);
    const minutes = parseInt(match?.[1] || 0);
    const seconds = parseInt(match?.[2] || 0);
    return `${minutes}:${seconds.toString().padStart(2, '0')}`;
  }

  function formatViews(count) {
    const num = parseInt(count);
    if (num >= 1_000_000) return (num / 1_000_000).toFixed(1).replace(/\.0$/, '') + 'M views';
    if (num >= 1_000) return (num / 1_000).toFixed(1).replace(/\.0$/, '') + 'K views';
    return num + ' views';
  }

  async function fetchChannelVideos(filterType = 'all') {
    try {
      const response = await fetch(`https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,contentDetails&playlistId=${UPLOADS_PLAYLIST_ID}&maxResults=12&key=${API_KEY}`);
      const data = await response.json();
      if (!data.items || data.items.length === 0) throw new Error('No videos available');

      const videoMap = {};
      data.items.forEach(item => {
        videoMap[item.contentDetails.videoId] = item.snippet;
      });

      const videoIds = Object.keys(videoMap).join(',');
      const detailsResponse = await fetch(`https://www.googleapis.com/youtube/v3/videos?part=contentDetails,statistics&id=${videoIds}&key=${API_KEY}`);
      const detailsData = await detailsResponse.json();

      const filteredVideos = detailsData.items.filter(video => {
        const duration = video.contentDetails.duration;
        const isShort = duration.includes('PT') && !duration.includes('H') && parseInt(duration.match(/(\d+)M/)?.[1] || 0) < 1;
        if (filterType === 'shorts') return isShort;
        if (filterType === 'videos') return !isShort;
        return true;
      });

      videosContainer.innerHTML = filteredVideos.map(video => {
        const snippet = videoMap[video.id];
        return `
          <div class="video-card" style="border: 1px solid #ddd; border-radius: 8px; overflow: hidden; background: #fff;">
            <div class="thumbnail" style="position: relative;">
              <img src="${snippet.thumbnails.high.url}" alt="Thumbnail" loading="lazy" style="width: 100%; display: block;">
              <span class="video-duration" style="position: absolute; bottom: 8px; right: 8px; background: rgba(0,0,0,0.8); color: #fff; padding: 2px 6px; font-size: 12px; border-radius: 4px;">
                ${formatDuration(video.contentDetails.duration)}
              </span>
            </div>
            <div class="video-info" style="padding: 8px;">
              <div class="video-title" style="font-weight: bold; font-size: 14px; margin-bottom: 4px;">${snippet.title}</div>
              <div class="video-channel" style="font-size: 12px; color: #555;">${snippet.channelTitle}</div>
              <div class="video-stats" style="font-size: 12px; color: #555;">${formatViews(video.statistics.viewCount)}</div>
            </div>
          </div>
        `;
      }).join('');
    } catch (error) {
      console.error('Error fetching videos:', error);
      videosContainer.innerHTML = `<div class="error">Error fetching videos: ${error.message}</div>`;
    }
  }

  filterSelect.addEventListener('change', () => fetchChannelVideos(filterSelect.value));

  fetchChannelVideos();
</script>
